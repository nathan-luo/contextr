# Story 1.2: Configure Pyright for Strict Type Checking

## Status
Draft

## Story
**As a** developer,  
**I want** Pyright configured for strict type checking,  
**so that** I can catch type-related errors early and improve code reliability.

## Acceptance Criteria
1. Pyright is added as a development dependency in `pyproject.toml`.
2. A `[tool.pyright]` configuration is added to `pyproject.toml` enabling `strict` mode.
3. All type errors in the existing codebase are resolved to satisfy the strict checking rules.
4. The project's contribution guidelines are updated with instructions on how to run Pyright.

## Tasks / Subtasks
- [ ] Add Pyright to development dependencies (AC: 1)
  - [ ] Add pyright to pyproject.toml dev dependencies
  - [ ] Install the updated dependencies
- [ ] Configure Pyright for strict mode (AC: 2)
  - [ ] Add [tool.pyright] section to pyproject.toml
  - [ ] Set typeCheckingMode = "strict"
  - [ ] Configure Python version target (3.12)
  - [ ] Set up appropriate include/exclude patterns
- [ ] Add type annotations to existing code (AC: 3)
  - [ ] Annotate all function signatures in cli.py
  - [ ] Annotate all methods in manager.py
  - [ ] Annotate formatters.py functions
  - [ ] Annotate utility functions in utils/
  - [ ] Add type stubs for any problematic third-party imports
- [ ] Fix all type errors (AC: 3)
  - [ ] Run pyright and catalog all errors
  - [ ] Fix type errors module by module
  - [ ] Ensure all imports have proper types
  - [ ] Verify pyright passes with zero errors
- [ ] Update documentation (AC: 4)
  - [ ] Add pyright command to CLAUDE.md
  - [ ] Document type checking workflow
  - [ ] Add guidance on maintaining type safety

## Dev Notes

### Current Type Annotation Status
- Limited type hints in existing code
- No type checking currently enforced
- Will need comprehensive annotation pass

### Key Modules Requiring Annotation
1. **cli.py**: Typer commands, console output functions
2. **manager.py**: ContextManager class, state management methods
3. **formatters.py**: File formatting functions
4. **utils/ignore_utils.py**: Gitignore pattern matching
5. **utils/path_utils.py**: Path manipulation functions

### Common Type Patterns
```python
from typing import List, Dict, Set, Optional, Union
from pathlib import Path
import typer
from rich.console import Console
```

### Pyright Strict Mode Considerations
- All functions must have return type annotations
- All parameters must have type annotations
- No implicit Any types allowed
- Proper handling of None/Optional types
- May need # type: ignore for some third-party imports

### Testing Standards
- Type checking should be part of CI/CD pipeline
- Run pyright before committing code
- Maintain 100% type coverage

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-23 | 1.0 | Initial story creation | BMad Master |

## Dev Agent Record
### Agent Model Used
(To be filled by dev agent)

### Debug Log References
(To be filled by dev agent)

### Completion Notes List
(To be filled by dev agent)

### File List
(To be filled by dev agent)

## QA Results
(To be filled by QA agent)